# Проект: Личный кабинет по подключению к сервисам. 

Проект является развитием и переосмыслением рабочего проекта.

## Описание: 
Личный кабинет представляет собой портал, на котором организации могут купить услуги и сервисы нашей компании, а также управлять пользователями, которые имеют доступ к этим сервисам.  

В рамках учебного проекта будем рассматривать следующий сценарий работы:
1. В личном кабинете регистрируется пользователь. Регистрацию и авторизацию рассматривать в проекте не будем.
2. Выбирает интересующие online сервисы (подписку на сервисы), ЭЦП, лицензии на наше или стороннее ПО.
3. Если покупается подписка, то пользователь должен заполнить информацию об организации, для которой покупается подписка.
4. В конце пользователю выставляется счет, который он оплачивает
5. После поступления оплаты наша внутренняя CRM сообщает (через очередь) срок действия подписки на приобретенный сервис.
6. Теперь пользователь может использовать приобретенные сервисы
7. При необходиомсти пользователь может подключать к своей организации других зарегистрированных пользователей для совместной работы в сервисах.
8. Для каждого сотрудника можно задать, уровень доступа как для каждого подключенного сервиса, так и на изменение данных об организации и возможности покупки.


## Схема базы данных:

![database_scheme]

Сущности:
1. Organizations - зарегистрированные организации. Могут быть как юр. лицами, так и физ. лицами. 
Если юр. лицо, то должно быть заполнена таблица CompanyInfos, а если физ. лицо, то PersonInfos.
Также у организации может быть, как один юридический адрес (связь по LegalAddressId), так и фактический адрес ActualAddressId. Фактический адрес может быть null, что обозначает, что адрес совпадает с юридическим.
2. Users - зарегистрированные пользователи, которые могут авторизовываться в личном кабинете и в других сервисах. Авторизация в других сервисах возможна только под какой-то организацией в которой пользователь числится сотрудником. Пользователи без организации могут только что-то купить.
3. Employees - пользователи, которые являются сотрудниками организации (Они сами купили подписку на сервис или их кто-то добавил в организацию)
4. Services - сервисы нашей организации, которые мы продаем по подписке. Сервисы ориентированы только на организацию (сдача отчетности, электонный документооборот и др.)
5. Permissions - права доступа сотрудника на купленные сервисы.
6. Packages - купленные пакеты (подписки) на сервисы
7. PriceItems - прайс лист на тарифы наших сервисов, выпуск эцп, и другие лицензии на програмное обеспечение. Позиции в прайс листе не меняются, если меняется цена, то создается новая позиция.
Если позиция - подписка на сервис, то в ней будет ссылка, на этот сервис. Пока не предполагается, что подписка может быть сразу на несколько сервиоов.
8. Orders - заказы пользователей. В заказе может быть одна или несколько позиций (OrderLines). Если позиция в заказе - подписка на сервис, то также указывается для какой организации покупается эта подписка. Также в OrdersDocuments хранится счет в формате pdf.
В заказе есть уникальный номер заказа, который строится по такому принципу <Префикс><Год (YY)><Порядковый номер в этом году> (Нарпимер AA190001234)


[database_scheme]: images/database_scheme.png